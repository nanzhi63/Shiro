import{r as M,j as $,R as ve}from"./index-CySfgEHw.js";import{p as Ee,u as et}from"./viewport-CMyC4XGs.js";import{u as ir,m as rt,i as tt}from"./use-ref-value-DdHjTcMk.js";import{e as rr,u as ur,f as Ze,s as qr,O as tr,U as er,j as he}from"./owner-Cs-ztUND.js";import{A as nt}from"./Shiki-xdlJpHFZ.js";import{c as le,a as Oe,M as at,b as ot}from"./StyledButton-0-JUJ9lO.js";import{d as st}from"./index-BtZRbbNR.js";import{u as lr,a as it}from"./use-motion-template-BBUoNIuT.js";import{m as ut}from"./proxy-sxV_SSC0.js";import{u as lt}from"./use-event-callback-C2f3IDCO.js";import"./provider-CVQJX8ms.js";let ct=Object.freeze([]),ft=e=>{let n=M.useRef(!1);!n.current&&(n.current=!0,e?.())},Fr=()=>{var e;let n=M.createContext(null),a=rr(null),r=M.memo(t=>{var o;let{data:s,children:l}=t,O=(o=M.useContext(n))!==null&&o!==void 0?o:a,g=ur(O);return ft(()=>{g(s)}),M.useEffect(()=>{g(s)},[s]),M.useEffect(()=>(g(s),()=>{g(null)}),[]),l});return r.displayName="ModelDataProvider",{ModelDataAtomProvider:t=>{let{children:o,overrideAtom:s}=t;return $.jsx(n.Provider,{value:s??a,children:o})},ModelDataProvider:r,useModelDataSelector:(t,o)=>{var s;let l=(s=M.useContext(n))!==null&&s!==void 0?s:a,O=M.useCallback(g=>g?t(g):null,o||ct);return Ze(qr(l,O))},useSetModelData:()=>ur((e=M.useContext(n))!==null&&e!==void 0?e:a),useGetModelData:()=>{var t;let o=(t=M.useContext(n))!==null&&t!==void 0?t:a,s=tr();return()=>s.get(o)},useModelData:()=>{var t;return Ze((t=M.useContext(n))!==null&&t!==void 0?t:a)},setGlobalModelData:t=>{let o=er();o.set(a,Ee(o.get(a),t))},getGlobalModelData:()=>er().get(a),ModelDataAtomContext:n}},cr=er();cr.get,cr.set;var pt={},$r={exports:{}};(function(e){function n(a){return a&&a.__esModule?a:{default:a}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})($r);var Pe=$r.exports,Gr={exports:{}};(function(e){function n(a){"@babel/helpers - typeof";return e.exports=n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,n(a)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(Gr);var be=Gr.exports,Re={exports:{}},fr;function dt(){return fr||(fr=1,function(e){var n=be.default;function a(){e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var r,t={},o=Object.prototype,s=o.hasOwnProperty,l=Object.defineProperty||function(c,u,p){c[u]=p.value},O=typeof Symbol=="function"?Symbol:{},g=O.iterator||"@@iterator",U=O.asyncIterator||"@@asyncIterator",i=O.toStringTag||"@@toStringTag";function v(c,u,p){return Object.defineProperty(c,u,{value:p,enumerable:!0,configurable:!0,writable:!0}),c[u]}try{v({},"")}catch{v=function(p,S,E){return p[S]=E}}function w(c,u,p,S){var E=u&&u.prototype instanceof V?u:V,R=Object.create(E.prototype),f=new y(S||[]);return l(R,"_invoke",{value:m(c,p,f)}),R}function A(c,u,p){try{return{type:"normal",arg:c.call(u,p)}}catch(S){return{type:"throw",arg:S}}}t.wrap=w;var B="suspendedStart",H="suspendedYield",z="executing",D="completed",k={};function V(){}function W(){}function K(){}var Y={};v(Y,g,function(){return this});var N=Object.getPrototypeOf,Q=N&&N(N(ee([])));Q&&Q!==o&&s.call(Q,g)&&(Y=Q);var q=K.prototype=V.prototype=Object.create(Y);function j(c){["next","throw","return"].forEach(function(u){v(c,u,function(p){return this._invoke(u,p)})})}function _(c,u){function p(E,R,f,x){var b=A(c[E],c,R);if(b.type!=="throw"){var L=b.arg,I=L.value;return I&&n(I)=="object"&&s.call(I,"__await")?u.resolve(I.__await).then(function(T){p("next",T,f,x)},function(T){p("throw",T,f,x)}):u.resolve(I).then(function(T){L.value=T,f(L)},function(T){return p("throw",T,f,x)})}x(b.arg)}var S;l(this,"_invoke",{value:function(R,f){function x(){return new u(function(b,L){p(R,f,b,L)})}return S=S?S.then(x,x):x()}})}function m(c,u,p){var S=B;return function(E,R){if(S===z)throw Error("Generator is already running");if(S===D){if(E==="throw")throw R;return{value:r,done:!0}}for(p.method=E,p.arg=R;;){var f=p.delegate;if(f){var x=d(f,p);if(x){if(x===k)continue;return x}}if(p.method==="next")p.sent=p._sent=p.arg;else if(p.method==="throw"){if(S===B)throw S=D,p.arg;p.dispatchException(p.arg)}else p.method==="return"&&p.abrupt("return",p.arg);S=z;var b=A(c,u,p);if(b.type==="normal"){if(S=p.done?D:H,b.arg===k)continue;return{value:b.arg,done:p.done}}b.type==="throw"&&(S=D,p.method="throw",p.arg=b.arg)}}}function d(c,u){var p=u.method,S=c.iterator[p];if(S===r)return u.delegate=null,p==="throw"&&c.iterator.return&&(u.method="return",u.arg=r,d(c,u),u.method==="throw")||p!=="return"&&(u.method="throw",u.arg=new TypeError("The iterator does not provide a '"+p+"' method")),k;var E=A(S,c.iterator,u.arg);if(E.type==="throw")return u.method="throw",u.arg=E.arg,u.delegate=null,k;var R=E.arg;return R?R.done?(u[c.resultName]=R.value,u.next=c.nextLoc,u.method!=="return"&&(u.method="next",u.arg=r),u.delegate=null,k):R:(u.method="throw",u.arg=new TypeError("iterator result is not an object"),u.delegate=null,k)}function C(c){var u={tryLoc:c[0]};1 in c&&(u.catchLoc=c[1]),2 in c&&(u.finallyLoc=c[2],u.afterLoc=c[3]),this.tryEntries.push(u)}function P(c){var u=c.completion||{};u.type="normal",delete u.arg,c.completion=u}function y(c){this.tryEntries=[{tryLoc:"root"}],c.forEach(C,this),this.reset(!0)}function ee(c){if(c||c===""){var u=c[g];if(u)return u.call(c);if(typeof c.next=="function")return c;if(!isNaN(c.length)){var p=-1,S=function E(){for(;++p<c.length;)if(s.call(c,p))return E.value=c[p],E.done=!1,E;return E.value=r,E.done=!0,E};return S.next=S}}throw new TypeError(n(c)+" is not iterable")}return W.prototype=K,l(q,"constructor",{value:K,configurable:!0}),l(K,"constructor",{value:W,configurable:!0}),W.displayName=v(K,i,"GeneratorFunction"),t.isGeneratorFunction=function(c){var u=typeof c=="function"&&c.constructor;return!!u&&(u===W||(u.displayName||u.name)==="GeneratorFunction")},t.mark=function(c){return Object.setPrototypeOf?Object.setPrototypeOf(c,K):(c.__proto__=K,v(c,i,"GeneratorFunction")),c.prototype=Object.create(q),c},t.awrap=function(c){return{__await:c}},j(_.prototype),v(_.prototype,U,function(){return this}),t.AsyncIterator=_,t.async=function(c,u,p,S,E){E===void 0&&(E=Promise);var R=new _(w(c,u,p,S),E);return t.isGeneratorFunction(u)?R:R.next().then(function(f){return f.done?f.value:R.next()})},j(q),v(q,i,"Generator"),v(q,g,function(){return this}),v(q,"toString",function(){return"[object Generator]"}),t.keys=function(c){var u=Object(c),p=[];for(var S in u)p.push(S);return p.reverse(),function E(){for(;p.length;){var R=p.pop();if(R in u)return E.value=R,E.done=!1,E}return E.done=!0,E}},t.values=ee,y.prototype={constructor:y,reset:function(u){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!u)for(var p in this)p.charAt(0)==="t"&&s.call(this,p)&&!isNaN(+p.slice(1))&&(this[p]=r)},stop:function(){this.done=!0;var u=this.tryEntries[0].completion;if(u.type==="throw")throw u.arg;return this.rval},dispatchException:function(u){if(this.done)throw u;var p=this;function S(L,I){return f.type="throw",f.arg=u,p.next=L,I&&(p.method="next",p.arg=r),!!I}for(var E=this.tryEntries.length-1;E>=0;--E){var R=this.tryEntries[E],f=R.completion;if(R.tryLoc==="root")return S("end");if(R.tryLoc<=this.prev){var x=s.call(R,"catchLoc"),b=s.call(R,"finallyLoc");if(x&&b){if(this.prev<R.catchLoc)return S(R.catchLoc,!0);if(this.prev<R.finallyLoc)return S(R.finallyLoc)}else if(x){if(this.prev<R.catchLoc)return S(R.catchLoc,!0)}else{if(!b)throw Error("try statement without catch or finally");if(this.prev<R.finallyLoc)return S(R.finallyLoc)}}}},abrupt:function(u,p){for(var S=this.tryEntries.length-1;S>=0;--S){var E=this.tryEntries[S];if(E.tryLoc<=this.prev&&s.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var R=E;break}}R&&(u==="break"||u==="continue")&&R.tryLoc<=p&&p<=R.finallyLoc&&(R=null);var f=R?R.completion:{};return f.type=u,f.arg=p,R?(this.method="next",this.next=R.finallyLoc,k):this.complete(f)},complete:function(u,p){if(u.type==="throw")throw u.arg;return u.type==="break"||u.type==="continue"?this.next=u.arg:u.type==="return"?(this.rval=this.arg=u.arg,this.method="return",this.next="end"):u.type==="normal"&&p&&(this.next=p),k},finish:function(u){for(var p=this.tryEntries.length-1;p>=0;--p){var S=this.tryEntries[p];if(S.finallyLoc===u)return this.complete(S.completion,S.afterLoc),P(S),k}},catch:function(u){for(var p=this.tryEntries.length-1;p>=0;--p){var S=this.tryEntries[p];if(S.tryLoc===u){var E=S.completion;if(E.type==="throw"){var R=E.arg;P(S)}return R}}throw Error("illegal catch attempt")},delegateYield:function(u,p,S){return this.delegate={iterator:ee(u),resultName:p,nextLoc:S},this.method==="next"&&(this.arg=r),k}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Re)),Re.exports}var Ce,pr;function nr(){if(pr)return Ce;pr=1;var e=dt()();Ce=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return Ce}var Me={exports:{}},Ae={exports:{}},je={exports:{}},dr;function vt(){return dr||(dr=1,function(e){var n=be.default;function a(r,t){if(n(r)!="object"||!r)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var s=o.call(r,t||"default");if(n(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(je)),je.exports}var vr;function Br(){return vr||(vr=1,function(e){var n=be.default,a=vt();function r(t){var o=a(t,"string");return n(o)=="symbol"?o:o+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Ae)),Ae.exports}var hr;function Se(){return hr||(hr=1,function(e){var n=Br();function a(r,t,o){return t=n(t),t in r?Object.defineProperty(r,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[t]=o,r}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Me)),Me.exports}var Ne={exports:{}},gr;function ar(){return gr||(gr=1,function(e){function n(r,t,o,s,l,O,g){try{var U=r[O](g),i=U.value}catch(v){o(v);return}U.done?t(i):Promise.resolve(i).then(s,l)}function a(r){return function(){var t=this,o=arguments;return new Promise(function(s,l){var O=r.apply(t,o);function g(i){n(O,s,l,g,U,"next",i)}function U(i){n(O,s,l,g,U,"throw",i)}g(void 0)})}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Ne)),Ne.exports}var Le={exports:{}},Te={exports:{}},yr;function ht(){return yr||(yr=1,function(e){function n(a){if(Array.isArray(a))return a}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Te)),Te.exports}var ke={exports:{}},br;function gt(){return br||(br=1,function(e){function n(a,r){var t=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(t!=null){var o,s,l,O,g=[],U=!0,i=!1;try{if(l=(t=t.call(a)).next,r===0){if(Object(t)!==t)return;U=!1}else for(;!(U=(o=l.call(t)).done)&&(g.push(o.value),g.length!==r);U=!0);}catch(v){i=!0,s=v}finally{try{if(!U&&t.return!=null&&(O=t.return(),Object(O)!==O))return}finally{if(i)throw s}}return g}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(ke)),ke.exports}var Ie={exports:{}},Ue={exports:{}},mr;function yt(){return mr||(mr=1,function(e){function n(a,r){(r==null||r>a.length)&&(r=a.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=a[t];return o}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Ue)),Ue.exports}var wr;function bt(){return wr||(wr=1,function(e){var n=yt();function a(r,t){if(r){if(typeof r=="string")return n(r,t);var o=Object.prototype.toString.call(r).slice(8,-1);if(o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set")return Array.from(r);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(r,t)}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Ie)),Ie.exports}var De={exports:{}},xr;function mt(){return xr||(xr=1,function(e){function n(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(De)),De.exports}var Or;function wt(){return Or||(Or=1,function(e){var n=ht(),a=gt(),r=bt(),t=mt();function o(s,l){return n(s)||a(s,l)||r(s,l)||t()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(Le)),Le.exports}var pe={},G={},qe={exports:{}},Er;function zr(){return Er||(Er=1,function(e){function n(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(qe)),qe.exports}var Fe={exports:{}},Pr;function xt(){return Pr||(Pr=1,function(e){function n(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Fe)),Fe.exports}var $e={exports:{}},Sr;function Ot(){return Sr||(Sr=1,function(e){var n=Br();function a(t,o){for(var s=0;s<o.length;s++){var l=o[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,n(l.key),l)}}function r(t,o,s){return o&&a(t.prototype,o),s&&a(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}($e)),$e.exports}var Ge={exports:{}},Be={exports:{}},_r;function or(){return _r||(_r=1,function(e){function n(a,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},e.exports.__esModule=!0,e.exports.default=e.exports,n(a,r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Be)),Be.exports}var Rr;function Et(){return Rr||(Rr=1,function(e){var n=or();function a(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&n(r,t)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(Ge)),Ge.exports}var ze={exports:{}},Cr;function Pt(){return Cr||(Cr=1,function(e){var n=be.default,a=zr();function r(t,o){if(o&&(n(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(ze)),ze.exports}var He={exports:{}},Mr;function Hr(){return Mr||(Mr=1,function(e){function n(a){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},e.exports.__esModule=!0,e.exports.default=e.exports,n(a)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(He)),He.exports}var We={exports:{}},Ke={exports:{}},Ar;function St(){return Ar||(Ar=1,function(e){function n(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Ke)),Ke.exports}var Ve={exports:{}},Xe={exports:{}},jr;function _t(){return jr||(jr=1,function(e){function n(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=n=function(){return!!a},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Xe)),Xe.exports}var Nr;function Rt(){return Nr||(Nr=1,function(e){var n=or(),a=_t();function r(t,o,s){if(a())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,o);var O=new(t.bind.apply(t,l));return s&&n(O,s.prototype),O}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(Ve)),Ve.exports}var Lr;function Ct(){return Lr||(Lr=1,function(e){var n=Hr(),a=or(),r=St(),t=Rt();function o(s){var l=typeof Map=="function"?new Map:void 0;return e.exports=o=function(g){if(g===null||!r(g))return g;if(typeof g!="function")throw new TypeError("Super expression must either be null or a function");if(typeof l<"u"){if(l.has(g))return l.get(g);l.set(g,U)}function U(){return t(g,arguments,n(this).constructor)}return U.prototype=Object.create(g.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),a(U,g)},e.exports.__esModule=!0,e.exports.default=e.exports,o(s)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(We)),We.exports}var Tr;function Mt(){if(Tr)return G;Tr=1;var e=Pe;Object.defineProperty(G,"__esModule",{value:!0}),G.UnsupportedStrategy=G.UnknownError=G.OAuthCallbackError=G.MissingSecret=G.MissingAuthorize=G.MissingAdapterMethods=G.MissingAdapter=G.MissingAPIRoute=G.InvalidCallbackUrl=G.AccountNotLinkedError=void 0,G.adapterErrorHandler=q,G.capitalize=N,G.eventsErrorHandler=Q,G.upperSnake=Y;var n=e(nr()),a=e(ar()),r=e(zr()),t=e(Se()),o=e(xt()),s=e(Ot()),l=e(Et()),O=e(Pt()),g=e(Hr()),U=e(Ct());function i(j){var _=v();return function(){var d=(0,g.default)(j),C;if(_){var P=(0,g.default)(this).constructor;C=Reflect.construct(d,arguments,P)}else C=d.apply(this,arguments);return(0,O.default)(this,C)}}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w=function(j){(0,l.default)(m,j);var _=i(m);function m(d){var C,P;return(0,o.default)(this,m),P=_.call(this,(C=d?.message)!==null&&C!==void 0?C:d),P.name="UnknownError",P.code=d.code,d instanceof Error&&(P.stack=d.stack),P}return(0,s.default)(m,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}]),m}((0,U.default)(Error));G.UnknownError=w;var A=function(j){(0,l.default)(m,j);var _=i(m);function m(){var d;(0,o.default)(this,m);for(var C=arguments.length,P=new Array(C),y=0;y<C;y++)P[y]=arguments[y];return d=_.call.apply(_,[this].concat(P)),(0,t.default)((0,r.default)(d),"name","OAuthCallbackError"),d}return(0,s.default)(m)}(w);G.OAuthCallbackError=A;var B=function(j){(0,l.default)(m,j);var _=i(m);function m(){var d;(0,o.default)(this,m);for(var C=arguments.length,P=new Array(C),y=0;y<C;y++)P[y]=arguments[y];return d=_.call.apply(_,[this].concat(P)),(0,t.default)((0,r.default)(d),"name","AccountNotLinkedError"),d}return(0,s.default)(m)}(w);G.AccountNotLinkedError=B;var H=function(j){(0,l.default)(m,j);var _=i(m);function m(){var d;(0,o.default)(this,m);for(var C=arguments.length,P=new Array(C),y=0;y<C;y++)P[y]=arguments[y];return d=_.call.apply(_,[this].concat(P)),(0,t.default)((0,r.default)(d),"name","MissingAPIRouteError"),(0,t.default)((0,r.default)(d),"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),d}return(0,s.default)(m)}(w);G.MissingAPIRoute=H;var z=function(j){(0,l.default)(m,j);var _=i(m);function m(){var d;(0,o.default)(this,m);for(var C=arguments.length,P=new Array(C),y=0;y<C;y++)P[y]=arguments[y];return d=_.call.apply(_,[this].concat(P)),(0,t.default)((0,r.default)(d),"name","MissingSecretError"),(0,t.default)((0,r.default)(d),"code","NO_SECRET"),d}return(0,s.default)(m)}(w);G.MissingSecret=z;var D=function(j){(0,l.default)(m,j);var _=i(m);function m(){var d;(0,o.default)(this,m);for(var C=arguments.length,P=new Array(C),y=0;y<C;y++)P[y]=arguments[y];return d=_.call.apply(_,[this].concat(P)),(0,t.default)((0,r.default)(d),"name","MissingAuthorizeError"),(0,t.default)((0,r.default)(d),"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),d}return(0,s.default)(m)}(w);G.MissingAuthorize=D;var k=function(j){(0,l.default)(m,j);var _=i(m);function m(){var d;(0,o.default)(this,m);for(var C=arguments.length,P=new Array(C),y=0;y<C;y++)P[y]=arguments[y];return d=_.call.apply(_,[this].concat(P)),(0,t.default)((0,r.default)(d),"name","MissingAdapterError"),(0,t.default)((0,r.default)(d),"code","EMAIL_REQUIRES_ADAPTER_ERROR"),d}return(0,s.default)(m)}(w);G.MissingAdapter=k;var V=function(j){(0,l.default)(m,j);var _=i(m);function m(){var d;(0,o.default)(this,m);for(var C=arguments.length,P=new Array(C),y=0;y<C;y++)P[y]=arguments[y];return d=_.call.apply(_,[this].concat(P)),(0,t.default)((0,r.default)(d),"name","MissingAdapterMethodsError"),(0,t.default)((0,r.default)(d),"code","MISSING_ADAPTER_METHODS_ERROR"),d}return(0,s.default)(m)}(w);G.MissingAdapterMethods=V;var W=function(j){(0,l.default)(m,j);var _=i(m);function m(){var d;(0,o.default)(this,m);for(var C=arguments.length,P=new Array(C),y=0;y<C;y++)P[y]=arguments[y];return d=_.call.apply(_,[this].concat(P)),(0,t.default)((0,r.default)(d),"name","UnsupportedStrategyError"),(0,t.default)((0,r.default)(d),"code","CALLBACK_CREDENTIALS_JWT_ERROR"),d}return(0,s.default)(m)}(w);G.UnsupportedStrategy=W;var K=function(j){(0,l.default)(m,j);var _=i(m);function m(){var d;(0,o.default)(this,m);for(var C=arguments.length,P=new Array(C),y=0;y<C;y++)P[y]=arguments[y];return d=_.call.apply(_,[this].concat(P)),(0,t.default)((0,r.default)(d),"name","InvalidCallbackUrl"),(0,t.default)((0,r.default)(d),"code","INVALID_CALLBACK_URL_ERROR"),d}return(0,s.default)(m)}(w);G.InvalidCallbackUrl=K;function Y(j){return j.replace(/([A-Z])/g,"_$1").toUpperCase()}function N(j){return"".concat(j[0].toUpperCase()).concat(j.slice(1))}function Q(j,_){return Object.keys(j).reduce(function(m,d){return m[d]=(0,a.default)(n.default.mark(function C(){var P,y=arguments;return n.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,P=j[d],c.next=4,P.apply(void 0,y);case 4:return c.abrupt("return",c.sent);case 7:c.prev=7,c.t0=c.catch(0),_.error("".concat(Y(d),"_EVENT_ERROR"),c.t0);case 10:case"end":return c.stop()}},C,null,[[0,7]])})),m},{})}function q(j,_){if(j)return Object.keys(j).reduce(function(m,d){return m[d]=(0,a.default)(n.default.mark(function C(){var P,y,ee,c,u,p=arguments;return n.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:for(E.prev=0,P=p.length,y=new Array(P),ee=0;ee<P;ee++)y[ee]=p[ee];return _.debug("adapter_".concat(d),{args:y}),c=j[d],E.next=6,c.apply(void 0,y);case 6:return E.abrupt("return",E.sent);case 9:throw E.prev=9,E.t0=E.catch(0),_.error("adapter_error_".concat(d),E.t0),u=new w(E.t0),u.name="".concat(N(d),"Error"),u;case 15:case"end":return E.stop()}},C,null,[[0,9]])})),m},{})}return G}var kr;function At(){if(kr)return pe;kr=1;var e=Pe;Object.defineProperty(pe,"__esModule",{value:!0}),pe.default=void 0,pe.proxyLogger=U,pe.setLogger=O;var n=e(Se()),a=Mt();function r(i,v){var w=Object.keys(i);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(i);v&&(A=A.filter(function(B){return Object.getOwnPropertyDescriptor(i,B).enumerable})),w.push.apply(w,A)}return w}function t(i){for(var v=1;v<arguments.length;v++){var w=arguments[v]!=null?arguments[v]:{};v%2?r(Object(w),!0).forEach(function(A){(0,n.default)(i,A,w[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(w)):r(Object(w)).forEach(function(A){Object.defineProperty(i,A,Object.getOwnPropertyDescriptor(w,A))})}return i}function o(i){if(i instanceof Error&&!(i instanceof a.UnknownError))return{message:i.message,stack:i.stack,name:i.name};if(s(i)){var v;i.error=o(i.error),i.message=(v=i.message)!==null&&v!==void 0?v:i.error.message}return i}function s(i){return!!(i!=null&&i.error)}var l={error:function(v,w){w=o(w),console.error("[next-auth][error][".concat(v,"]"),`
https://next-auth.js.org/errors#`.concat(v.toLowerCase()),w.message,w)},warn:function(v){console.warn("[next-auth][warn][".concat(v,"]"),`
https://next-auth.js.org/warnings#`.concat(v.toLowerCase()))},debug:function(v,w){console.log("[next-auth][debug][".concat(v,"]"),w)}};function O(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=arguments.length>1?arguments[1]:void 0;v||(l.debug=function(){}),i.error&&(l.error=i.error),i.warn&&(l.warn=i.warn),i.debug&&(l.debug=i.debug)}var g=l;pe.default=g;function U(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l,v=arguments.length>1?arguments[1]:void 0;try{if(typeof window>"u")return i;var w={},A=function(z){w[z]=function(D,k){l[z](D,k),z==="error"&&(k=o(k)),k.client=!0;var V="".concat(v,"/_log"),W=new URLSearchParams(t({level:z,code:D},k));return navigator.sendBeacon?navigator.sendBeacon(V,W):fetch(V,{method:"POST",body:W,keepalive:!0})}};for(var B in i)A(B);return w}catch{return l}}return pe}var we={},Ir;function jt(){if(Ir)return we;Ir=1,Object.defineProperty(we,"__esModule",{value:!0}),we.default=e;function e(n){var a;const r=new URL("http://localhost:3000/api/auth");n&&!n.startsWith("http")&&(n=`https://${n}`);const t=new URL((a=n)!==null&&a!==void 0?a:r),o=(t.pathname==="/"?r.pathname:t.pathname).replace(/\/$/,""),s=`${t.origin}${o}`;return{origin:t.origin,host:t.host,path:o,base:s,toString:()=>s}}return we}var de={},Ur;function Nt(){if(Ur)return de;Ur=1;var e=Pe;Object.defineProperty(de,"__esModule",{value:!0}),de.BroadcastChannel=U,de.apiBaseUrl=O,de.fetchData=s,de.now=g;var n=e(nr()),a=e(Se()),r=e(ar());function t(i,v){var w=Object.keys(i);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(i);v&&(A=A.filter(function(B){return Object.getOwnPropertyDescriptor(i,B).enumerable})),w.push.apply(w,A)}return w}function o(i){for(var v=1;v<arguments.length;v++){var w=arguments[v]!=null?arguments[v]:{};v%2?t(Object(w),!0).forEach(function(A){(0,a.default)(i,A,w[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(w)):t(Object(w)).forEach(function(A){Object.defineProperty(i,A,Object.getOwnPropertyDescriptor(w,A))})}return i}function s(i,v,w){return l.apply(this,arguments)}function l(){return l=(0,r.default)(n.default.mark(function i(v,w,A){var B,H,z,D,k,V,W,K,Y,N=arguments;return n.default.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return B=N.length>3&&N[3]!==void 0?N[3]:{},H=B.ctx,z=B.req,D=z===void 0?H?.req:z,k="".concat(O(w),"/").concat(v),q.prev=2,W={headers:o({"Content-Type":"application/json"},D!=null&&(V=D.headers)!==null&&V!==void 0&&V.cookie?{cookie:D.headers.cookie}:{})},D!=null&&D.body&&(W.body=JSON.stringify(D.body),W.method="POST"),W.credentials="include",q.next=7,fetch(k,W);case 7:return K=q.sent,q.next=10,K.json();case 10:if(Y=q.sent,K.ok){q.next=13;break}throw Y;case 13:return q.abrupt("return",Object.keys(Y).length>0?Y:null);case 16:return q.prev=16,q.t0=q.catch(2),console.error("CLIENT_FETCH_ERROR",{error:q.t0,url:k}),q.abrupt("return",null);case 20:case"end":return q.stop()}},i,null,[[2,16]])})),l.apply(this,arguments)}function O(i){return typeof window>"u"?"".concat(i.baseUrlServer).concat(i.basePathServer):i.basePath}function g(){return Math.floor(Date.now()/1e3)}function U(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"nextauth.message";return{receive:function(w){var A=function(H){var z;if(H.key===i){var D=JSON.parse((z=H.newValue)!==null&&z!==void 0?z:"{}");D?.event!=="session"||!(D!=null&&D.data)||w(D)}};return window.addEventListener("storage",A),function(){return window.removeEventListener("storage",A)}},post:function(w){if(!(typeof window>"u"))try{localStorage.setItem(i,JSON.stringify(o(o({},w),{},{timestamp:g()})))}catch{}}}}return de}var Je={},Dr;function Lt(){return Dr||(Dr=1,Object.defineProperty(Je,"__esModule",{value:!0})),Je}(function(e){var n={NEXT_PUBLIC_API_URL:"https://innei.ren/api/v2",NEXT_PUBLIC_GATEWAY_URL:"https://api.innei.ren",TMDB_API_KEY:"",GH_TOKEN:""},a=Pe,r=be;Object.defineProperty(e,"__esModule",{value:!0});var t={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};e.SessionContext=void 0,e.SessionProvider=R,e.getCsrfToken=P,e.getProviders=ee,e.getSession=d,e.signIn=u,e.signOut=S,e.useSession=m;var o=a(nr()),s=a(Se()),l=a(ar()),O=a(wt()),g=W(M),U=W(At()),i=a(jt()),v=Nt(),w=$,A=Lt();Object.keys(A).forEach(function(f){f==="default"||f==="__esModule"||Object.prototype.hasOwnProperty.call(t,f)||f in e&&e[f]===A[f]||Object.defineProperty(e,f,{enumerable:!0,get:function(){return A[f]}})});var B,H,z,D,k;function V(f){if(typeof WeakMap!="function")return null;var x=new WeakMap,b=new WeakMap;return(V=function(I){return I?b:x})(f)}function W(f,x){if(f&&f.__esModule)return f;if(f===null||r(f)!=="object"&&typeof f!="function")return{default:f};var b=V(x);if(b&&b.has(f))return b.get(f);var L={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in f)if(T!=="default"&&Object.prototype.hasOwnProperty.call(f,T)){var J=I?Object.getOwnPropertyDescriptor(f,T):null;J&&(J.get||J.set)?Object.defineProperty(L,T,J):L[T]=f[T]}return L.default=f,b&&b.set(f,L),L}function K(f,x){var b=Object.keys(f);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(f);x&&(L=L.filter(function(I){return Object.getOwnPropertyDescriptor(f,I).enumerable})),b.push.apply(b,L)}return b}function Y(f){for(var x=1;x<arguments.length;x++){var b=arguments[x]!=null?arguments[x]:{};x%2?K(Object(b),!0).forEach(function(L){(0,s.default)(f,L,b[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(b)):K(Object(b)).forEach(function(L){Object.defineProperty(f,L,Object.getOwnPropertyDescriptor(b,L))})}return f}var N={baseUrl:(0,i.default)((B=n.NEXTAUTH_URL)!==null&&B!==void 0?B:n.VERCEL_URL).origin,basePath:(0,i.default)(n.NEXTAUTH_URL).path,baseUrlServer:(0,i.default)((H=(z=n.NEXTAUTH_URL_INTERNAL)!==null&&z!==void 0?z:n.NEXTAUTH_URL)!==null&&H!==void 0?H:n.VERCEL_URL).origin,basePathServer:(0,i.default)((D=n.NEXTAUTH_URL_INTERNAL)!==null&&D!==void 0?D:n.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},Q=(0,v.BroadcastChannel)(),q=(0,U.proxyLogger)(U.default,N.basePath);function j(){var f=g.useState(typeof navigator<"u"?navigator.onLine:!1),x=(0,O.default)(f,2),b=x[0],L=x[1],I=function(){return L(!0)},T=function(){return L(!1)};return g.useEffect(function(){return window.addEventListener("online",I),window.addEventListener("offline",T),function(){window.removeEventListener("online",I),window.removeEventListener("offline",T)}},[]),b}var _=(k=g.createContext)===null||k===void 0?void 0:k.call(g,void 0);e.SessionContext=_;function m(f){if(!_)throw new Error("React Context is unavailable in Server Components");var x=g.useContext(_),b=f??{},L=b.required,I=b.onUnauthenticated,T=L&&x.status==="unauthenticated";return g.useEffect(function(){if(T){var J="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));I?I():window.location.href=J}},[T,I]),T?{data:x.data,update:x.update,status:"loading"}:x}function d(f){return C.apply(this,arguments)}function C(){return C=(0,l.default)(o.default.mark(function f(x){var b,L;return o.default.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,v.fetchData)("session",N,q,x);case 2:return L=T.sent,(!((b=x?.broadcast)!==null&&b!==void 0)||b)&&Q.post({event:"session",data:{trigger:"getSession"}}),T.abrupt("return",L);case 5:case"end":return T.stop()}},f)})),C.apply(this,arguments)}function P(f){return y.apply(this,arguments)}function y(){return y=(0,l.default)(o.default.mark(function f(x){var b;return o.default.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,v.fetchData)("csrf",N,q,x);case 2:return b=I.sent,I.abrupt("return",b?.csrfToken);case 4:case"end":return I.stop()}},f)})),y.apply(this,arguments)}function ee(){return c.apply(this,arguments)}function c(){return c=(0,l.default)(o.default.mark(function f(){return o.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,v.fetchData)("providers",N,q);case 2:return b.abrupt("return",b.sent);case 3:case"end":return b.stop()}},f)})),c.apply(this,arguments)}function u(f,x,b){return p.apply(this,arguments)}function p(){return p=(0,l.default)(o.default.mark(function f(x,b,L){var I,T,J,ue,oe,te,ae,se,ce,F,me,ge,fe,Z,ie,ne,re;return o.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return I=b??{},T=I.callbackUrl,J=T===void 0?window.location.href:T,ue=I.redirect,oe=ue===void 0?!0:ue,te=(0,v.apiBaseUrl)(N),h.next=4,ee();case 4:if(ae=h.sent,ae){h.next=8;break}return window.location.href="".concat(te,"/error"),h.abrupt("return");case 8:if(!(!x||!(x in ae))){h.next=11;break}return window.location.href="".concat(te,"/signin?").concat(new URLSearchParams({callbackUrl:J})),h.abrupt("return");case 11:return se=ae[x].type==="credentials",ce=ae[x].type==="email",F=se||ce,me="".concat(te,"/").concat(se?"callback":"signin","/").concat(x),ge="".concat(me).concat(L?"?".concat(new URLSearchParams(L)):""),h.t0=fetch,h.t1=ge,h.t2={"Content-Type":"application/x-www-form-urlencoded"},h.t3=URLSearchParams,h.t4=Y,h.t5=Y({},b),h.t6={},h.next=25,P();case 25:return h.t7=h.sent,h.t8=J,h.t9={csrfToken:h.t7,callbackUrl:h.t8,json:!0},h.t10=(0,h.t4)(h.t5,h.t6,h.t9),h.t11=new h.t3(h.t10),h.t12={method:"post",headers:h.t2,body:h.t11},h.next=33,(0,h.t0)(h.t1,h.t12);case 33:return fe=h.sent,h.next=36,fe.json();case 36:if(Z=h.sent,!(oe||!F)){h.next=42;break}return ne=(ie=Z.url)!==null&&ie!==void 0?ie:J,window.location.href=ne,ne.includes("#")&&window.location.reload(),h.abrupt("return");case 42:if(re=new URL(Z.url).searchParams.get("error"),!fe.ok){h.next=46;break}return h.next=46,N._getSession({event:"storage"});case 46:return h.abrupt("return",{error:re,status:fe.status,ok:fe.ok,url:re?null:Z.url});case 47:case"end":return h.stop()}},f)})),p.apply(this,arguments)}function S(f){return E.apply(this,arguments)}function E(){return E=(0,l.default)(o.default.mark(function f(x){var b,L,I,T,J,ue,oe,te,ae,se;return o.default.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return L=x??{},I=L.callbackUrl,T=I===void 0?window.location.href:I,J=(0,v.apiBaseUrl)(N),F.t0={"Content-Type":"application/x-www-form-urlencoded"},F.t1=URLSearchParams,F.next=6,P();case 6:return F.t2=F.sent,F.t3=T,F.t4={csrfToken:F.t2,callbackUrl:F.t3,json:!0},F.t5=new F.t1(F.t4),ue={method:"post",headers:F.t0,body:F.t5},F.next=13,fetch("".concat(J,"/signout"),ue);case 13:return oe=F.sent,F.next=16,oe.json();case 16:if(te=F.sent,Q.post({event:"session",data:{trigger:"signout"}}),!(!((b=x?.redirect)!==null&&b!==void 0)||b)){F.next=23;break}return se=(ae=te.url)!==null&&ae!==void 0?ae:T,window.location.href=se,se.includes("#")&&window.location.reload(),F.abrupt("return");case 23:return F.next=25,N._getSession({event:"storage"});case 25:return F.abrupt("return",te);case 26:case"end":return F.stop()}},f)})),E.apply(this,arguments)}function R(f){if(!_)throw new Error("React Context is unavailable in Server Components");var x=f.children,b=f.basePath,L=f.refetchInterval,I=f.refetchWhenOffline;b&&(N.basePath=b);var T=f.session!==void 0;N._lastSync=T?(0,v.now)():0;var J=g.useState(function(){return T&&(N._session=f.session),f.session}),ue=(0,O.default)(J,2),oe=ue[0],te=ue[1],ae=g.useState(!T),se=(0,O.default)(ae,2),ce=se[0],F=se[1];g.useEffect(function(){return N._getSession=(0,l.default)(o.default.mark(function Z(){var ie,ne,re,ye=arguments;return o.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(ie=ye.length>0&&ye[0]!==void 0?ye[0]:{},ne=ie.event,X.prev=1,re=ne==="storage",!(re||N._session===void 0)){X.next=10;break}return N._lastSync=(0,v.now)(),X.next=7,d({broadcast:!re});case 7:return N._session=X.sent,te(N._session),X.abrupt("return");case 10:if(!(!ne||N._session===null||(0,v.now)()<N._lastSync)){X.next=12;break}return X.abrupt("return");case 12:return N._lastSync=(0,v.now)(),X.next=15,d();case 15:N._session=X.sent,te(N._session),X.next=22;break;case 19:X.prev=19,X.t0=X.catch(1),q.error("CLIENT_SESSION_ERROR",X.t0);case 22:return X.prev=22,F(!1),X.finish(22);case 25:case"end":return X.stop()}},Z,null,[[1,19,22,25]])})),N._getSession(),function(){N._lastSync=0,N._session=void 0,N._getSession=function(){}}},[]),g.useEffect(function(){var Z=Q.receive(function(){return N._getSession({event:"storage"})});return function(){return Z()}},[]),g.useEffect(function(){var Z=f.refetchOnWindowFocus,ie=Z===void 0?!0:Z,ne=function(){ie&&document.visibilityState==="visible"&&N._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",ne,!1),function(){return document.removeEventListener("visibilitychange",ne,!1)}},[f.refetchOnWindowFocus]);var me=j(),ge=I!==!1||me;g.useEffect(function(){if(L&&ge){var Z=setInterval(function(){N._session&&N._getSession({event:"poll"})},L*1e3);return function(){return clearInterval(Z)}}},[L,ge]);var fe=g.useMemo(function(){return{data:oe,status:ce?"loading":oe?"authenticated":"unauthenticated",update:function(ie){return(0,l.default)(o.default.mark(function ne(){var re;return o.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(ce||!oe)){h.next=2;break}return h.abrupt("return");case 2:return F(!0),h.t0=v.fetchData,h.t1=N,h.t2=q,h.next=8,P();case 8:return h.t3=h.sent,h.t4=ie,h.t5={csrfToken:h.t3,data:h.t4},h.t6={body:h.t5},h.t7={req:h.t6},h.next=15,(0,h.t0)("session",h.t1,h.t2,h.t7);case 15:return re=h.sent,F(!1),re&&(te(re),Q.post({event:"session",data:{trigger:"getSession"}})),h.abrupt("return",re);case 19:case"end":return h.stop()}},ne)}))()}}},[oe,ce]);return(0,w.jsx)(_.Provider,{value:fe,children:x})}})(pt);rr({});const Wr=M.createContext(null),Kr=M.createContext(null),Vr=()=>M.useContext(Wr),Tt=()=>M.useContext(Kr),kt=M.forwardRef((e,n)=>{const{showErrorMessage:a=!0,...r}=e,t=ir(()=>rr({})),o=ir(()=>({showErrorMessage:a,fields:t,getField:s=>he.get(t)[s],getCurrentValues:()=>Object.fromEntries(Object.entries(he.get(t)).map(([s,l])=>{const O=l.getEl()?.value;return[s,l.transform?l.transform?.(O):O]})),addField:(s,l)=>{he.set(t,O=>({...O,[s]:l}))},removeField:s=>{he.set(t,l=>{const O={...l};return delete O[s],O})}}));return M.useImperativeHandle(n,()=>o,[o]),$.jsx(Wr.Provider,{value:o,children:$.jsx(Kr.Provider,{value:M.useMemo(()=>({showErrorMessage:a}),[a]),children:$.jsx(It,{...r})})})});kt.displayName="Form";const It=e=>{const{onSubmit:n,...a}=e,r=Vr().fields,t=M.useCallback(async o=>{o.preventDefault();const s=he.get(r);for await(const[l,O]of Object.entries(s)){const g=O.getEl();if(!g)continue;const{value:U}=g,{rules:i}=O;for(const[v,w]of i.entries())try{if(!await w.validator(U)){console.error(`Form validation failed, at field \`${l}\`, got value \`${U}\``),g.focus(),w.message&&he.set(r,B=>Ee(B,H=>{H[l].rules[v].status="error"}));return}}catch(A){console.error("validate function throw error",A);return}}n?.(o)},[n]);return $.jsx("form",{onSubmit:t,...a,children:e.children})};var Ut="Label",Xr=M.forwardRef((e,n)=>$.jsx(st.label,{...e,ref:n,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));Xr.displayName=Ut;var Jr=Xr;const Dt=M.createContext({}),qt=()=>M.useContext(Dt),sr=M.forwardRef(({className:e,...n},a)=>{const r=qt();return $.jsx(Jr,{ref:a,className:le("text-foreground-600 text-[1em] font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e,r.className),...n})});sr.displayName=Jr.displayName;const Ft=({errorMessage:e,id:n})=>$.jsx("div",{className:"mt-2",children:$.jsx(sr,{className:"text-xs font-medium text-error",htmlFor:n,children:e})}),$t=M.createContext({}),Gt=()=>M.useContext($t),Bt=ve.forwardRef((e,n)=>{const{className:a,type:r,label:t,isLoading:o,errorMessage:s,isInvalid:l,endContent:O,labelPlacement:g,inputClassName:U,bindValue:i,...v}=e,w=M.useId(),A=Gt(),{value:B,onChange:H,onBlur:z,onFocus:D,labelClassName:k,...V}=v,[W,K]=ve.useState(!1),Y=ve.useCallback(()=>{K(!0)},[]),N=ve.useCallback(()=>{K(!1)},[]),[Q,q]=ve.useState(v.value);M.useEffect(()=>{q(v.value)},[v.value]);const[j,_]=ve.useState(!1),m=rt({},A,e),{labelPlacement:d="top"}=m,C=le(A.inputClassName,e.labelClassName),P=le(A.inputClassName,e.inputClassName);return $.jsxs("div",{className:"flex w-full flex-col",children:[$.jsxs("div",{className:le({"flex flex-col":d==="top","flex grow flex-row items-center":d==="left"},"peer relative",a),children:[t&&$.jsx(sr,{className:Oe({"mr-4":d==="left","mb-2 flex":d==="top"},d==="inside"&&{"absolute left-3 top-2 z-[1] select-none duration-200":!0,"text-primary":W,"bottom-2 top-2 flex items-center text-lg":!B&&!W},C),htmlFor:w,children:t}),$.jsxs("div",{className:"relative grow",children:[$.jsx("input",{id:w,value:tt(i)?Q:i,onChange:y=>{q(y.target.value),H?.(y)},onBlur:y=>{N(),z?.(y)},onFocus:y=>{Y(),D?.(y)},type:r==="password"&&!j?"password":"text",className:le("flex h-10 w-full rounded-md border px-3 py-2 text-sm","focus-visible:outline-none focus-visible:ring-0 disabled:cursor-not-allowed disabled:opacity-50","border-zinc-200 bg-white placeholder:text-slate-500 focus-visible:border-primary dark:border-neutral-800 dark:bg-zinc-900",d==="inside"&&"h-auto pb-2 pt-8",r==="password"&&["pr-6",!j&&"font-mono"],o&&"pr-6",l&&"!border-red-400 !bg-red-600/50",P),ref:n,...V}),r==="password"&&!o&&$.jsx(at,{className:Ye({placement:d}),onClick:()=>{_(!j)},children:$.jsx("i",{className:Oe("text-lg text-gray-500",j?"i-mingcute-eye-line":"i-mingcute-eye-close-line")})}),!o&&O&&$.jsx("div",{className:Ye({placement:d}),children:O}),o&&$.jsx("div",{className:Ye({placement:d}),children:$.jsx("i",{className:"loading loading-spinner size-5 text-primary/80"})})]})]}),l&&s&&$.jsx(Ft,{id:w,errorMessage:s})]})}),Ye=ot({base:"absolute right-2",variants:{placement:{inside:"bottom-2",left:"bottom-0 top-0 flex items-center",top:"bottom-0 top-0 flex items-center"}}});Bt.displayName="Input";const Yr=e=>{const{onKeyDown:n,onCompositionStart:a,onCompositionEnd:r}=e,t=M.useRef(!1),o=M.useCallback(O=>{t.current=!0,a?.(O)},[a]),s=M.useCallback(O=>{t.current=!1,r?.(O)},[r]),l=M.useCallback(O=>{if(t.current){O.stopPropagation();return}n?.(O)},[n]);return{onCompositionEnd:s,onCompositionStart:o,onKeyDown:l}},Qr=M.forwardRef(({className:e,...n},a)=>{const r=Yr(n);return $.jsx("input",{ref:a,className:le("min-w-0 flex-auto appearance-none rounded-lg border ring-accent/20 duration-200 sm:text-sm lg:text-base","bg-base-100 px-3 py-[calc(theme(spacing.2)-1px)] placeholder:text-zinc-400 focus:outline-none focus:ring-2 dark:bg-zinc-700/[0.15]","border-border","focus:!border-accent/80 focus:!bg-accent/5 dark:text-zinc-200 dark:placeholder:text-zinc-500",n.type==="password"?"font-mono placeholder:font-sans":"font-sans",e),...n,...r})});Qr.displayName="Input";const xe={sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl","2xl":"rounded-2xl","3xl":"rounded-3xl",default:"rounded"},zt=M.forwardRef((e,n)=>{const{className:a,wrapperClassName:r,children:t,rounded:o="xl",bordered:s=!0,onCmdEnter:l,onKeyDown:O,...g}=e,U=lr(0),i=lr(0),v=M.useCallback(({clientX:k,clientY:V,currentTarget:W})=>{const K=W.getBoundingClientRect();U.set(k-K.left),i.set(V-K.top)},[U,i]),w=M.useCallback(k=>{k.key==="Enter"&&(k.metaKey||k.ctrlKey)&&l?.(k),O?.(k)},[l,O]),A=it`radial-gradient(320px circle at ${U}px ${i}px, var(--spotlight-color) 0%, transparent 85%)`,B=et(),H=Yr(Object.assign({},e,{onKeyDown:w})),[z,D]=M.useState(!1);return $.jsxs("div",{className:le("group relative h-full border ring-0 ring-accent/20 duration-200 [--spotlight-color:oklch(var(--a)_/_0.12)]",xe[o],"border-transparent",z&&"border-accent/80 bg-accent/5 ring-2","dark:text-zinc-200 dark:placeholder:text-zinc-500",r),onMouseMove:v,children:[!B&&$.jsx(ut.div,{className:Oe("pointer-events-none absolute inset-0 z-0 opacity-0 transition-opacity duration-500 group-hover:opacity-100",xe[o]),style:{background:A},"aria-hidden":"true"}),s&&$.jsx("div",{className:Oe("border-border pointer-events-none absolute inset-0 z-0 border",xe[o]),"aria-hidden":"true"}),$.jsx("textarea",{ref:n,className:le("size-full resize-none bg-transparent","overflow-auto px-3 py-4","!outline-none","text-neutral-900/80 dark:text-slate-100/80",xe[o],a),...g,onFocus:k=>{D(!0),g.onFocus?.(k)},onBlur:k=>{D(!1),g.onBlur?.(k)},...H}),t]})});zt.displayName="TextArea";const _e=()=>{const e=Vr();if(!e)throw new Error("FormInput must be used inside <FormContext />");return e},Ht=e=>{const n=_e(),{fields:a}=n;return Ze(qr(a,M.useCallback(r=>{if(e)return r[e]?.rules.find(t=>t.status==="error")?.message},[e])))},Wt=({rules:e,transform:n,getEl:a,name:r})=>{const t=_e(),{addField:o,removeField:s}=t,l=lt(a);M.useEffect(()=>{if(e&&r)return o(r,{rules:e,getEl:l,transform:n}),()=>{s(r)}},[o,l,r,s,e,n])},Kt=e=>{const n=tr(),a=_e(),{fields:r}=a;return M.useCallback(()=>{n.set(r,t=>Ee(t,o=>{e&&o[e].rules.forEach(s=>{s.status==="error"&&(s.status="success")})}))},[r,n,e])},Vt=e=>{const n=tr(),a=_e(),{fields:r}=a;return M.useCallback(()=>{n.set(r,t=>Ee(t,o=>{if(!e)return;const s=o[e].getEl()?.value;s&&o[e].rules.some(l=>{if(!l.validator(s))return l.status="error",!0})}))},[r,n,e])},Xt=M.memo(({className:e,rules:n,onKeyDown:a,transform:r,name:t,...o})=>{const{showErrorMessage:s}=Tt(),l=M.useRef(null),O=Ht(t);Wt({rules:n||[],transform:r,getEl:()=>l.current,name:t});const g=Kt(t),U=M.useCallback(v=>{a&&a(v),g()},[a,g]),i=Vt(t);return $.jsxs($.Fragment,{children:[$.jsx(Qr,{name:t,ref:l,className:le(!!O&&"ring-2 ring-red-400 dark:ring-orange-700","w-full",e),type:"text",onKeyDown:U,onBlur:v=>{i(),o.onBlur?.(v)},...o}),s&&$.jsx(nt,{duration:.2,children:$.jsx("p",{className:"text-left text-sm text-red-400 dark:text-orange-700",children:O})})]})});Xt.displayName="FormInput";var Jt=(e=>(e.Home="//",e.Posts="/posts",e.Post="/posts/",e.Notes="/notes",e.Note="/notes/",e.NoteTopics="/notes/topics",e.NoteTopic="/notes/topics/",e.Timelime="/timeline",e.Login="/login",e.Page="/",e.Categories="/categories",e.Category="/categories/",e.Projects="/projects",e.Project="/projects/",e.Says="/says",e.Friends="/friends",e.Thinking="/thinking",e.PageDeletd="/common/deleted",e))(Jt||{});function ln(e,n){let a=e;switch(e){case"/notes/":{a+=n.id,n.password&&(a+=`?password=${n.password}`);break}case"/posts/":{const r=n;a+=`${r.category}/${r.slug}`;break}case"/posts":{const r=n;a+=`?${new URLSearchParams(r).toString()}`;break}case"/timeline":{const r=n;a+=`?${new URLSearchParams(r).toString()}`;break}case"/notes/topics/":case"/categories/":case"/":{a+=n.slug;break}case"//":{a="/";break}case"/projects/":{a+=n.id;break}}return a}M.createContext(null);M.createContext({reset(e,n){}});const{ModelDataProvider:cn,ModelDataAtomProvider:fn,getGlobalModelData:pn,setGlobalModelData:dn,useModelDataSelector:vn,useSetModelData:hn}=Fr(),{ModelDataProvider:gn,ModelDataAtomProvider:yn,getGlobalModelData:bn,setGlobalModelData:mn,useModelDataSelector:wn}=Fr(),xn=e=>["comments",e],Qe=e=>`ws_event:${e}`;class Zr extends Event{constructor(n,a){super(Qe(n)),this.data=a}static on(n,a){const r=t=>{a(t.data)};return document.addEventListener(Qe(n),r),()=>{document.removeEventListener(Qe(n),r)}}static emit(n,a){document.dispatchEvent(new Zr(n,a))}}export{kt as F,Qr as I,yn as M,Jt as R,zt as T,Zr as W,Xt as a,ln as b,gn as c,vn as d,fn as e,cn as f,Tt as g,Ht as h,Wt as i,Kt as j,Vt as k,pn as l,bn as m,mn as n,xn as o,Fr as p,pt as r,dn as s,wn as u};
